{"version":3,"sources":["app.js","classes/Bar.js","classes/Fridge.js","classes/Game.js","classes/Product.js","classes/Shop.js","classes/State.js"],"names":["app","document","addEventListener","started","Product","load","fridge","Fridge","state","State","setTimeout","shop","Shop","Bar","init","game","Game","random","bars","refresh","kcal","protein","fat","carbohydrates","kcal_limit","protein_limit","fat_limit","carbohydrates_limit","bar","a","max","style","height","toString","b","refbar","getElementsByClassName","max_kcal","max_protein","max_fat","max_carbohydrates","top","needs","i","length","chart","push","console","log","products","productName","actual_kcal","actual_protein","actual_fat","actual_carbohydrates","alert","container","well","innerHTML","product","div","createElement","className","dataset","title","draw","eatProduct","visibility","appendChild","score","min_kcal","min_protein","min_fat","min_carbohydrates","min","Math","floor","rand","img","src","icon","alt","displayName","url","fetch","then","response","contentType","headers","get","indexOf","json","food","foods","Object","assign","limit","cart","inCart","shelfSize","set","number","map","name","sort","slice","item","items","keys","randomName","getElementById","hint","prod","n","insertProduct","window","innerWidth","shelf","j","num","buyProduct","querySelector","onclick","checkout","states","$this","location","hash","target","replace","classList","add","remove","reset","loadRandomProducts","filter","startsWith","clear","round","totalScore","parseInt"],"mappings":"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","file":"all.js","sourcesContent":["var app = app || {};\n\ndocument.addEventListener(\"DOMContentLoaded\", function() {\n  if(app.started) return;\n  app.started = true;\n  app.Product.load('/json/foods.json');\n\n  app.fridge = new app.Fridge();\n\n  app.state = new app.State();\n  //app.state.set('welcome');\n\n  setTimeout(function() {\n    app.shop = new app.Shop(10);\n  }, 500);\n\n\n  app.Bar.init();\n\n  app.game = new app.Game();\n  app.game.random();\n\n  app.bars[0].refresh();\n  app.bars[1].refresh();\n\n\n});\n","var app = app || {};\n\napp.Bar = class {\n  constructor() {\n    this.kcal = 0;\n    this.protein = 0;\n    this.fat = 0;\n    this.carbohydrates = 0;\n\n    this.kcal_limit = 30;\n    this.protein_limit = 30;\n    this.fat_limit = 30;\n    this.carbohydrates_limit = 30;\n  }\n\n  refbar(bar,a,max){\n    bar.style.height=(100-(100*a/max)).toString()+'%';\n  }\n\n  refresh(b) {\n    this.refbar(this.bars[0].getElementsByClassName('blank')[0],this.kcal,app.game.max_kcal);\n    this.bars[1].getElementsByClassName('blank')[0].style.height=(100-(100*this.protein/app.game.max_protein)).toString()+'%';\n    this.bars[2].getElementsByClassName('blank')[0].style.height=(100-(100*this.fat/app.game.max_fat)).toString()+'%';\n    this.bars[3].getElementsByClassName('blank')[0].style.height=(100-(100*this.carbohydrates/app.game.max_carbohydrates)).toString()+'%';\n    if(b){\n      this.bars[0].getElementsByClassName('limit')[0].style.top=(100-(100*this.kcal_limit/app.game.max_kcal)).toString()+'%';\n      this.bars[1].getElementsByClassName('limit')[0].style.top=(100-(100*this.protein_limit/app.game.max_protein)).toString()+'%';\n      this.bars[2].getElementsByClassName('limit')[0].style.top=(100-(100*this.fat_limit/app.game.max_fat)).toString()+'%';\n      this.bars[3].getElementsByClassName('limit')[0].style.top=(100-(100*this.carbohydrates_limit/app.game.max_carbohydrates)).toString()+'%';\n    }\n\n  }\n\n  static init() {\n    app.bars = [];\n    let needs = document.getElementsByClassName('needs');\n    app.needs = needs;\n\n    for(let i = 0; i < needs.length ; i++) {\n      let chart = new app.Bar();\n      chart.bars = [];\n      chart.bars.push(app.needs[i].getElementsByClassName(\"kcal\")[0]);\n      chart.bars.push(app.needs[i].getElementsByClassName(\"protein\")[0]);\n      chart.bars.push(app.needs[i].getElementsByClassName(\"fat\")[0]);\n      chart.bars.push(app.needs[i].getElementsByClassName(\"carbohydrates\")[0]);\n      app.bars.push(chart);\n      console.log(chart);\n      //chart.refresh();\n    }\n\n  }\n};","/**\n * Created by rozwad on 08.04.17.\n */\n\nvar app = app || {};\n\napp.Fridge = class {\n  constructor() {\n    this.products = [];\n  }\n\n  clear() {\n    this.products = [];\n  }\n\n  insertProduct(productName) {\n    console.log('inserting');\n    this.products.push(productName);\n  }\n\n  eatProduct(productName) {\n    console.log(app.game.actual_kcal, app.products[productName].kcal,\n      app.game.actual_kcal + app.products[productName].kcal,\n    app.game.max_kcal);\n\n    if(\n      (app.game.actual_kcal + app.products[productName].kcal > app.game.max_kcal)\n      || (app.game.actual_protein + app.products[productName].protein > app.game.max_protein)\n      || (app.game.actual_fat + app.products[productName].fat > app.game.max_fat)\n      || (app.game.actual_carbohydrates + app.products[productName].carbohydrates > app.game.max_carbohydrates)\n    ) {\n      alert(\"Jesteś przejedzony!\");\n      return;\n    }\n\n    app.game.actual_kcal += app.products[productName].kcal;\n    app.game.actual_protein += app.products[productName].protein;\n    app.game.actual_fat += app.products[productName].fat;\n    app.game.actual_carbohydrates += app.products[productName].carbohydrates;\n\n    app.bars[1].kcal = app.game.actual_kcal;\n    app.bars[1].protein = app.game.actual_protein;\n    app.bars[1].fat = app.game.actual_fat;\n    app.bars[1].carbohydrates = app.game.actual_carbohydrates;\n\n    // app.bars[1].max_kcal = app.game.actual_kcal;\n    // app.bars[1].max_protein = app.game.actual_protein;\n    // app.bars[1].max_fat = app.game.actual_fat;\n    // app.bars[1].max_carbohydrates = app.game.actual_carbohydrates;\n\n    app.bars[1].refresh(true);\n  }\n\n  draw(container) {\n    let well = container.getElementsByClassName(\"fridge--content--wrapper\")[0];\n    well.innerHTML = '';\n    let fridge = this;\n    let i;\n    for (i=0; i<this.products.length; i++) {\n      let productName = this.products[i];\n      let product = app.products[productName];\n      let div = document.createElement(\"div\");\n      div.className = \"fridge--content--item\";\n      div.dataset.title = product.kcal+' kcal, białko: '+product.protein+', węglowodany: '+product.carbohydrates+', tłuszcze: '+product.fat;\n      product.draw(div);\n      div.addEventListener(\"click\", function() {\n        fridge.eatProduct(productName);\n        div.style.visibility = 'hidden';\n      });\n      well.appendChild(div);\n    }\n    while (i % 5 != 0) {\n      i++;\n      let div = document.createElement(\"div\");\n      div.className = \"fridge--content--item\";\n      well.appendChild(div);\n    }\n  }\n};","var app = app || {};\n\napp.Game = class {\n  constructor() {\n    this.score = 0;\n\n    this.min_kcal = 1000;\n    this.min_protein = 100;\n    this.min_fat = 100;\n    this.min_carbohydrates = 100;\n\n    this.max_kcal = 2000;\n    this.max_protein = 500;\n    this.max_fat = 500;\n    this.max_carbohydrates = 500;\n\n    document.getElementsByClassName(\"valueKcal\")[0].innerHTML = this.max_kcal.toString();\n    document.getElementsByClassName(\"valueProtein\")[0].innerHTML = this.max_protein.toString();\n    document.getElementsByClassName(\"valueFat\")[0].innerHTML = this.max_fat.toString();\n    document.getElementsByClassName(\"valueCarbo\")[0].innerHTML = this.max_carbohydrates.toString();\n\n    this.actual_kcal = 0;\n    this.actual_protein = 0;\n    this.actual_fat = 0;\n    this.actual_carbohydrates = 0;\n  }\n\n  rand(min, max){\n    return Math.floor(Math.random()*(max-min) + min);\n  }\n\n  random() {\n    this.kcal = this.rand(this.min_kcal,this.max_kcal);\n    this.protein = this.rand(this.min_protein,this.max_protein);\n    this.fat = this.rand(this.min_fat,this.max_fat);\n    this.carbohydrates = this.rand(this.min_carbohydrates,this.max_carbohydrates);\n\n    this.actual_kcal = 0;\n    this.actual_protein = 0;\n    this.actual_fat = 0;\n    this.actual_carbohydrates = 0;\n\n    app.bars[0].kcal = this.kcal;\n    app.bars[0].protein = this.protein;\n    app.bars[0].fat = this.fat;\n    app.bars[0].carbohydrates = this.carbohydrates;\n\n    app.bars[0].kcal_limit = this.kcal;\n    app.bars[0].protein_limit = this.protein;\n    app.bars[0].fat_limit = this.fat;\n    app.bars[0].carbohydrates_limit = this.carbohydrates;\n\n    app.bars[1].kcal_limit = this.kcal;\n    app.bars[1].protein_limit = this.protein;\n    app.bars[1].fat_limit = this.fat;\n    app.bars[1].carbohydrates_limit = this.carbohydrates;\n\n    app.bars[0].refresh(true);\n    app.bars[1].refresh(true);\n  }\n\n\n};","var app = app || {};\n\napp.Product = class {\n  constructor() {\n\n  }\n\n  static load(url){\n    fetch(url)\n      .then(function(response) {\n        var contentType = response.headers.get(\"content-type\");\n        if(contentType && contentType.indexOf(\"application/json\") !== -1) {\n          return response.json().then(function(json) {\n            app.products = {};\n            for(let food in json.foods){\n              app.products[food] = Object.assign( new app.Product(), json.foods[food]);\n            }\n          });\n        } else {\n          console.log(\"Oops, we haven't got JSON!\");\n        }\n      });\n  }\n\n  draw(div) {\n    let img = document.createElement(\"img\");\n    img.src = 'images/icons/'+this.icon;\n    img.alt = this.displayName;\n    div.appendChild(img);\n  }\n\n};","/**\n * Created by rozwad on 08.04.17.\n */\n\nvar app = app || {};\n\napp.Shop = class {\n  constructor(limit) {\n    this.products = [];\n    this.cart = {};\n    this.limit = limit;\n    this.inCart = 0;\n    this.shelfSize = 5;\n  }\n\n  reset() {\n    this.products = [];\n    this.cart = {};\n    this.inCart = 0;\n  }\n\n  loadRandomProducts(set, number) {\n    this.products = set.map(name => [name, Math.random()])\n      .sort((a, b) => a[1] - b[1])\n      .slice(0, number)\n      .map(item => item[0]);\n\n    this.products[Math.floor(Math.random()*number)] = \"yoghurt\";\n  }\n\n  insertProduct(productName) {\n    this.products.push(productName);\n  }\n\n  buyProduct(productName) {\n    if (this.inCart < this.limit) {\n      this.cart[productName] = (this.cart[productName] || 0) + 1;\n      this.inCart++;\n    }\n  }\n\n  checkout() {\n    var items = Object.keys(this.cart);\n    var randomName = items[Math.floor(Math.random()*items.length)];\n    document.getElementById('best-tip-ever').innerHTML = app.products[randomName].hint;\n\n    for (let prod in this.cart) {\n      let n = this.cart[prod];\n      console.log('put some ', prod, ' to the fridge n=', n);\n      while (n--) {\n        app.fridge.insertProduct(prod);\n\n      }\n    }\n    app.fridge.draw(document.getElementById(\"fridge\"));\n  }\n\n  draw(container) {\n    this.shelfSize = Math.min(window.innerWidth, 260*5) / 260;\n    \n    let well = container.getElementsByClassName(\"well\")[0];\n    well.innerHTML = '';\n    container.getElementsByClassName(\"projRemaining\")[0].innerHTML = this.inCart + '/' + this.limit;\n    let shop = this;\n    let shelf, j;\n    for (let i=0; i<this.products.length; i++) {\n      if (!shelf) {\n        shelf = document.createElement(\"div\");\n        shelf.className = \"shelf\";\n        j = 0;\n      }\n      let productName = this.products[i];\n      let div = document.createElement(\"div\");\n      div.className = \"item\";\n      div.dataset.num = 0;\n      let product = app.products[productName];\n      product.draw(div);\n      div.addEventListener(\"click\", function() {\n        shop.buyProduct(productName);\n        div.dataset.num = shop.cart[productName] || 0;\n        container.getElementsByClassName(\"projRemaining\")[0].innerHTML = shop.inCart + '/' + shop.limit;\n      });\n      shelf.appendChild(div);\n      if (++j >= this.shelfSize) {\n        well.appendChild(shelf);\n        shelf = null;\n      }\n    }\n\n    document.querySelector(\"#shop .start\").onclick = function() {\n      shop.checkout();\n    };\n  }\n};","var app = app || {};\n\napp.states = ['welcome', 'monster', 'shop', 'tips', 'fridge', 'score'];\n\napp.State = class {\n  constructor() {\n    var $this = this;\n    window.addEventListener(\"hashchange\", function(){\n      console.log($this);\n      $this.set(window.location.hash);\n      //window.location.hash = \"\";\n    });\n  }\n\n  set(target) {\n    //target = target.substring(1);\n    target = target.replace('#', '');\n    if(target == 'monster') {\n      app.game.random();\n    }\n    //if( (target) && (0 === target.length) ) return;\n    for(let i in app.states) {\n      let state = app.states[i];\n      //if((state) && (0 === target.length)) break;\n      document.getElementById(state).classList.add(\"hidden\");\n    }\n    document.getElementById(target).classList.remove(\"hidden\");\n\n    if (target == \"monster\") {\n      app.shop.reset();\n      app.shop.loadRandomProducts(\n        Object.keys(app.products).filter(name => !(name.startsWith('cooked-') || name.startsWith('fried-') || name == 'yoghurt')),\n        20\n      );\n      app.shop.draw(document.getElementById(\"shop\"));\n      app.fridge.clear();\n    }\n    if (target == \"score\") {\n      /*let deltaKcal = Math.abs(app.game.kcal - app.game.actual_kcal);\n      let deltaProtein = Math.abs(app.game.protein - app.game.actual_protein);\n      let deltaFat = Math.abs(app.game.fat - app.game.actual_fat);\n      let deltaCarbohydrates = Math.abs(app.game.carbohydrates - app.game.actual_carbohydrates);\n\n      let score0 = deltaKcal + deltaProtein + deltaFat + deltaCarbohydrates;*/\n      let score = Math.round(Math.random()*80 + 50);\n      document.querySelector('h2').innerHTML = score;\n      let totalScore = (parseInt(document.querySelector('#total').innerHTML) || 0) + score;\n      document.querySelector('#total').innerHTML = totalScore;\n    }\n  }\n};"]}